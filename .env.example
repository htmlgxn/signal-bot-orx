# Required
SIGNAL_API_BASE_URL=http://127.0.0.1:8080
SIGNAL_SENDER_NUMBER=+15550001111
# Optional UUID/ACI identifier for metadata mention matching
SIGNAL_SENDER_UUID=
OPENROUTER_CHAT_API_KEY=sk-or-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Optional OpenRouter tuning
OPENROUTER_MODEL=openai/gpt-4o-mini
OPENROUTER_IMAGE_API_KEY=
OPENROUTER_IMAGE_MODEL=
# /imagine uses OpenRouter chat/completions with modalities:["image"].
OPENROUTER_IMAGE_TIMEOUT_SECONDS=90
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
OPENROUTER_TIMEOUT_SECONDS=45
OPENROUTER_MAX_OUTPUT_TOKENS=300
OPENROUTER_HTTP_REFERER=
OPENROUTER_APP_TITLE=signal-bot-orx

# Optional chat behavior
BOT_CHAT_TEMPERATURE=0.6
BOT_CHAT_CONTEXT_TURNS=6
BOT_CHAT_CONTEXT_TTL_SECONDS=1800
# Optional override for base system instruction sent to OpenRouter
# If empty, the app loads prompt text from markdown files:
# - local override: src/signal_bot_orx/chat_system_prompt.md (git-ignored)
# - distribution default: src/signal_bot_orx/default_chat_system_prompt.md
BOT_CHAT_SYSTEM_PROMPT=
# Enforce plain-text normalization on model output (true/false)
BOT_CHAT_FORCE_PLAIN_TEXT=true
BOT_MENTION_ALIASES=@signalbot,@bot
BOT_MAX_PROMPT_CHARS=700

# Optional DDGS search behavior
BOT_SEARCH_ENABLED=true
# Search privacy mode:
# - no_context (default): DDGS only for explicit slash commands
#   (/search, /news, /wiki, /images, /videos, /source)
# - context: allow normal chat messages to be eligible for DDGS routing
BOT_SEARCH_CONTEXT_MODE=no_context
# Per-command mode toggles:
BOT_SEARCH_MODE_SEARCH_ENABLED=true
BOT_SEARCH_MODE_NEWS_ENABLED=true
BOT_SEARCH_MODE_WIKI_ENABLED=true
BOT_SEARCH_MODE_IMAGES_ENABLED=true
BOT_SEARCH_MODE_VIDEOS_ENABLED=true
# Debug-only routing diagnostics (no raw message/result payload logging)
BOT_SEARCH_DEBUG_LOGGING=false
# Search response style controls:
BOT_SEARCH_PERSONA_ENABLED=false
BOT_SEARCH_USE_HISTORY_FOR_SUMMARY=false
# Search settings:
BOT_SEARCH_REGION=us-en
BOT_SEARCH_SAFESEARCH=moderate
# Backend query strategy:
# - first_non_empty (default): stop at first backend with results
# - aggregate: query all configured backends, merge/dedupe, then cap to MAX_RESULTS
BOT_SEARCH_BACKEND_STRATEGY=first_non_empty
# Ordered fallback chains for general search/news.
# If set, these take precedence over legacy single-backend vars below.
# Search default keeps grokipedia last to avoid encyclopedia-first answers.
BOT_SEARCH_BACKEND_SEARCH_ORDER=duckduckgo,bing,google,yandex,grokipedia
# News default excludes encyclopedia backends.
BOT_SEARCH_BACKEND_NEWS_ORDER=duckduckgo,bing,yahoo
# Legacy single-backend compatibility vars:
BOT_SEARCH_BACKEND_SEARCH=auto
BOT_SEARCH_BACKEND_NEWS=auto
BOT_SEARCH_BACKEND_WIKI=wikipedia
BOT_SEARCH_BACKEND_IMAGES=duckduckgo
BOT_SEARCH_BACKEND_VIDEOS=youtube
BOT_SEARCH_TEXT_MAX_RESULTS=5
BOT_SEARCH_NEWS_MAX_RESULTS=5
BOT_SEARCH_WIKI_MAX_RESULTS=3
BOT_SEARCH_IMAGES_MAX_RESULTS=3
BOT_SEARCH_VIDEOS_MAX_RESULTS=5
BOT_SEARCH_TIMEOUT_SECONDS=8
BOT_SEARCH_SOURCE_TTL_SECONDS=1800

# Access control
# Legacy single number allowlist:
SIGNAL_ALLOWED_NUMBER=+15550002222
# Multiple allowed numbers (comma-separated):
SIGNAL_ALLOWED_NUMBERS=
# Allowed Signal group IDs (comma-separated):
SIGNAL_ALLOWED_GROUP_IDS=
# Temporary testing bypass for allowlists (true/false):
SIGNAL_DISABLE_AUTH=false

# Reply behavior for group messages:
# - group: reply back to the group
# - dm_fallback: send replies privately to sender
BOT_GROUP_REPLY_MODE=group

# Bind example for deployment/LAN access.
# Code default remains 127.0.0.1 when this is unset.
BOT_WEBHOOK_HOST=0.0.0.0
BOT_WEBHOOK_PORT=8001
